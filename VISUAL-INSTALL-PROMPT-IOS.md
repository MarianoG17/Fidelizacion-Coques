# ğŸ“± VisualizaciÃ³n: Install Prompt en iOS Safari

## ğŸ¬ Flujo Completo para Usuarios de iPhone

### **Paso 1: Usuario entra a coques.com desde Safari**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† â†’   coques.com           [Compartir]â”‚ â† Safari toolbar
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚    ğŸ¥¤ COQUES BAKERY                    â”‚
â”‚                                        â”‚
â”‚    Tu Pass Virtual                     â”‚
â”‚    [OTP: 123456]                       â”‚
â”‚                                        â”‚
â”‚    ğŸ Beneficios de Hoy                â”‚
â”‚    [Sus beneficios reales de la DB]    â”‚ â† Los beneficios reales
â”‚                                        â”‚  vienen de la base de datos
â”‚                                        â”‚  segÃºn su nivel
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **Nota:** Los beneficios que ve cada usuario son dinÃ¡micos y vienen de `/api/pass/beneficios-disponibles` segÃºn su nivel (Bronce/Plata/Oro/Diamante). Este diagrama solo muestra la estructura visual de la pÃ¡gina.

### **Paso 2: DespuÃ©s de 3 segundos aparece el banner**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† â†’   coques.com           [Compartir]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚    ğŸ¥¤ COQUES BAKERY                    â”‚
â”‚                                        â”‚
â”‚    Tu Pass Virtual                     â”‚
â”‚    [OTP: 123456]                       â”‚
â”‚                                        â”‚
â”‚                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† Desliza hacia arriba
â”‚â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—â”‚   desde aquÃ­ con
â”‚â”‚                                   [âœ•]â”‚â”‚   animaciÃ³n suave
â”‚â”‚ ğŸ“±  Â¡InstalÃ¡ Coques Bakery          â”‚â”‚
â”‚â”‚      en tu iPhone!                   â”‚â”‚
â”‚â”‚                                      â”‚â”‚
â”‚â”‚  Acceso rÃ¡pido desde tu pantalla     â”‚â”‚
â”‚â”‚  de inicio                           â”‚â”‚
â”‚â”‚                                      â”‚â”‚
â”‚â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚â”‚ â”‚  SeguÃ­ estos pasos:            â”‚  â”‚â”‚
â”‚â”‚ â”‚                                â”‚  â”‚â”‚
â”‚â”‚ â”‚  1. TocÃ¡ el botÃ³n [Compartir  ]â”‚  â”‚â”‚
â”‚â”‚ â”‚     [â–¡â†‘] en la barra inferior  â”‚  â”‚â”‚
â”‚â”‚ â”‚                                â”‚  â”‚â”‚
â”‚â”‚ â”‚  2. DeslizÃ¡ hacia abajo y tocÃ¡ â”‚  â”‚â”‚
â”‚â”‚ â”‚     "Agregar a pantalla de     â”‚  â”‚â”‚
â”‚â”‚ â”‚     inicio"                    â”‚  â”‚â”‚
â”‚â”‚ â”‚                                â”‚  â”‚â”‚
â”‚â”‚ â”‚  3. ConfirmÃ¡ tocando "Agregar" â”‚  â”‚â”‚
â”‚â”‚ â”‚     arriba a la derecha        â”‚  â”‚â”‚
â”‚â”‚ â”‚                                â”‚  â”‚â”‚
â”‚â”‚ â”‚  ğŸ’¡ La app aparecerÃ¡ en tu     â”‚  â”‚â”‚
â”‚â”‚ â”‚  pantalla de inicio como       â”‚  â”‚â”‚
â”‚â”‚ â”‚  cualquier otra app            â”‚  â”‚â”‚
â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    [Home] [AtrÃ¡s] [Tabs] [Compartir] â† iOS navigation bar
```

## ğŸ¨ Detalles Visuales del Banner

### Colores:
- **Fondo:** Gradient azul â†’ violeta (matching Coques branding)
  - `rgb(59, 130, 246)` (azul) â†’ `rgb(147, 51, 234)` (violeta)
- **Texto:** Blanco con alta legibilidad
- **NÃºmeros:** Amarillo dorado (`text-yellow-300`) para destacar
- **Caja de pasos:** Fondo blanco semi-transparente con blur effect

### TamaÃ±o:
- **Alto total:** ~280-320px (depende del tamaÃ±o de texto del iPhone)
- **Ancho:** Full width con padding de 16px a los lados
- **PosiciÃ³n:** `position: fixed` en bottom (siempre visible al hacer scroll)

### AnimaciÃ³n de entrada:
```
Tiempo 0s:     transform: translateY(100%)  â† EstÃ¡ debajo de la pantalla
               opacity: 0

Tiempo 0.3s:   transform: translateY(0)     â† Desliza suavemente hacia arriba
               opacity: 1
```

## ğŸ“ Texto Exacto que VerÃ¡n

### TÃ­tulo:
```
ğŸ“± Â¡InstalÃ¡ Coques Bakery en tu iPhone!
```

### SubtÃ­tulo:
```
Acceso rÃ¡pido desde tu pantalla de inicio
```

### Instrucciones:
```
SeguÃ­ estos pasos:

1. TocÃ¡ el botÃ³n [Compartir â–¡â†‘] en la barra inferior

2. DeslizÃ¡ hacia abajo y tocÃ¡ "Agregar a pantalla de inicio"

3. ConfirmÃ¡ tocando "Agregar" arriba a la derecha

ğŸ’¡ La app aparecerÃ¡ en tu pantalla de inicio como cualquier otra app
```

## ğŸ­ Comportamiento Interactivo

### BotÃ³n [âœ•] (cerrar):
- **PosiciÃ³n:** Arriba a la derecha
- **Efecto hover:** Fondo blanco semi-transparente al tocar
- **Al tocar:** Banner desaparece + guarda en localStorage
- **No vuelve a aparecer por:** 24 horas

### Persistencia:
```javascript
// Se guarda en el dispositivo:
localStorage.setItem('installPromptDismissed', Date.now())

// El usuario puede volver a verlo despuÃ©s de:
// - 24 horas (86400000 milisegundos)
// - Si limpia el cachÃ© del navegador
// - Si usa modo incÃ³gnito (no se guarda)
```

## ğŸ“± ComparaciÃ³n iOS vs Android

### iOS (lo que acabamos de ver):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  ğŸ“± Â¡InstalÃ¡ Coques Bakery          â”‚
â”‚     en tu iPhone!                    â”‚
â”‚                                      â”‚
â”‚  SeguÃ­ estos pasos:                  â”‚
â”‚  1. TocÃ¡ [Compartir â–¡â†‘]             â”‚
â”‚  2. "Agregar a pantalla de inicio"   â”‚
â”‚  3. ConfirmÃ¡ "Agregar"               â”‚
â”‚                                      â”‚
â”‚  ğŸ’¡ Manual - requiere 3 pasos        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Android (mÃ¡s simple):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  ğŸ“± InstalÃ¡ la app en tu dispositivo â”‚
â”‚     Acceso rÃ¡pido, notificaciones    â”‚
â”‚                                      â”‚
â”‚     [Instalar]           [âœ•]        â”‚ â† Un solo botÃ³n
â”‚                                      â”‚
â”‚  ğŸ’¡ AutomÃ¡tico - 1 click             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš™ï¸ DetecciÃ³n AutomÃ¡tica

El componente detecta automÃ¡ticamente si es iOS mediante:

```typescript
const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent)
const isInStandaloneMode = window.matchMedia('(display-mode: standalone)').matches

if (isIOS && !isInStandaloneMode) {
  // Mostrar instrucciones manuales de iOS
} else if (deferredPrompt && !isIOS) {
  // Mostrar botÃ³n automÃ¡tico de Android
}
```

## ğŸ” Casos Especiales

### Si el usuario YA instalÃ³ la app:
**NO se muestra el banner** â†’ Detecta modo standalone

### Si el usuario estÃ¡ en modo incÃ³gnito:
Se muestra el banner normalmente, pero no se guarda el "dismissed" en localStorage

### Si el usuario cierra Safari y vuelve entrar:
- **Antes de 24h:** NO se muestra (estÃ¡ en localStorage)
- **DespuÃ©s de 24h:** Se vuelve a mostrar

### Si el usuario usa Chrome iOS (no Safari):
TambiÃ©n muestra las instrucciones de iOS porque Chrome iOS usa el motor de Safari

## ğŸ“Š MÃ©tricas Sugeridas

PodÃ©s trackear estas acciones para medir efectividad:

```typescript
// Cuando aparece el banner
gtag('event', 'install_prompt_shown', { platform: 'ios' })

// Cuando lo cierran
gtag('event', 'install_prompt_dismissed', { platform: 'ios' })

// No podÃ©s trackear instalaciÃ³n directa en iOS 
// (a diferencia de Android)
```

---

## ğŸ¯ Resumen Visual Simple

**Usuario de iPhone ve esto despuÃ©s de 3 segundos:**

1. Banner azul-violeta gradient en bottom
2. Emoji ğŸ“± + texto "Â¡InstalÃ¡ Coques Bakery en tu iPhone!"
3. Instrucciones claras paso a paso con nÃºmeros en amarillo
4. BotÃ³n [âœ•] para cerrar
5. No vuelve a aparecer por 24 horas si lo cierra

**Es completamente funcional y profesional** - explica claramente el proceso manual que Apple requiere para todas las PWAs.
